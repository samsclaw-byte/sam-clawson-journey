<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mission Control - Overview</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f8f9ff 0%, #fff5f8 100%);
            color: #1a1a2e;
            min-height: 100vh;
        }
        
        .header {
            background: linear-gradient(135deg, #9945FF 0%, #FF6B9D 100%);
            padding: 30px 20px;
            text-align: center;
            color: white;
            box-shadow: 0 4px 20px rgba(153, 69, 255, 0.3);
        }
        
        .header h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .view-toggle {
            display: flex;
            justify-content: center;
            margin: 20px;
            background: white;
            border-radius: 25px;
            padding: 4px;
            max-width: 300px;
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 2px 10px rgba(153, 69, 255, 0.1);
        }
        
        .view-toggle button {
            flex: 1;
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            background: transparent;
            color: #666;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .view-toggle button.active {
            background: linear-gradient(135deg, #9945FF, #FF6B9D);
            color: white;
        }
        
        .nav {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin: 20px;
            flex-wrap: wrap;
        }
        
        .nav a {
            padding: 12px 24px;
            background: white;
            border: 1px solid rgba(153, 69, 255, 0.2);
            border-radius: 25px;
            color: #9945FF;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .nav a:hover, .nav a.active {
            background: linear-gradient(135deg, #9945FF, #FF6B9D);
            color: white;
            border-color: transparent;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 2px 20px rgba(153, 69, 255, 0.08);
            border: 1px solid rgba(153, 69, 255, 0.1);
        }
        
        .card h2 {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: linear-gradient(135deg, #9945FF, #FF6B9D);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 16px;
            font-weight: 600;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #f8f5ff 0%, #fff5f8 100%);
            padding: 24px;
            border-radius: 16px;
            border: 1px solid rgba(153, 69, 255, 0.15);
            text-align: center;
        }
        
        .stat-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }
        
        .stat-value {
            font-size: 36px;
            font-weight: 700;
            background: linear-gradient(135deg, #9945FF, #FF6B9D);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .habit-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 12px;
        }
        
        .habit-item {
            text-align: center;
            padding: 16px 8px;
            background: linear-gradient(135deg, #f8f5ff 0%, #fff5f8 100%);
            border-radius: 12px;
            border: 2px solid transparent;
            transition: all 0.2s;
        }
        
        .habit-item.complete {
            border-color: #28a745;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        }
        
        .habit-item.incomplete {
            border-color: #ffc107;
        }
        
        .habit-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .habit-name {
            font-size: 11px;
            font-weight: 600;
            color: #1a1a2e;
        }
        
        .habit-status {
            font-size: 12px;
            margin-top: 4px;
            font-weight: 700;
        }
        
        .task-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px;
            background: linear-gradient(135deg, #f8f5ff 0%, #fff5f8 100%);
            border-radius: 12px;
            border-left: 4px solid #9945FF;
        }
        
        .task-item.overdue {
            border-left-color: #dc3545;
        }
        
        .task-item.today {
            border-left-color: #ffc107;
        }
        
        .task-content {
            flex: 1;
        }
        
        .task-name {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 4px;
        }
        
        .task-meta {
            font-size: 12px;
            color: #666;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }
        
        .chart-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }
        
        .trend-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 2px 20px rgba(153, 69, 255, 0.08);
            border: 1px solid rgba(153, 69, 255, 0.1);
        }
        
        .trend-card h3 {
            font-size: 14px;
            font-weight: 600;
            color: #9945FF;
            margin-bottom: 16px;
        }
        
        .hidden {
            display: none !important;
        }
        
        .date-display {
            text-align: center;
            font-size: 18px;
            font-weight: 600;
            color: #9945FF;
            margin-bottom: 8px;
        }
        
        .day-counter {
            text-align: center;
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
        }
        
        .quick-win-card {
            background: linear-gradient(135deg, #9945FF 0%, #FF6B9D 100%);
            color: white;
            padding: 24px;
            border-radius: 16px;
            text-align: center;
        }
        
        .quick-win-card h3 {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 12px;
        }
        
        .quick-win-value {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .quick-win-label {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .footer {
            text-align: center;
            padding: 40px 20px;
            color: #9945FF;
            font-size: 24px;
        }
        
        @media (max-width: 768px) {
            .habit-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            .chart-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéØ Mission Control</h1>
        <p>Your Personal Dashboard</p>
    </div>
    
    <div class="nav">
        <a href="index.html" class="active">Overview</a>
        <a href="health-nutrition.html">Health & Nutrition</a>
        <a href="productivity.html">Productivity</a>
        <a href="work.html">Work</a>
        <a href="blog.html">Blog</a>
        <a href="fitness-program.html">Fitness</a>
    </div>

    <div class="view-toggle">
        <button class="active" onclick="switchView('today')">Today</button>
        <button onclick="switchView('trend')">Trend</button>
    </div>
    
    <div class="container">
        <!-- TODAY VIEW -->
        <div id="today-view">
            <div class="date-display" id="today-date">Loading...</div>
            <div class="day-counter" id="day-counter">Day -- of your journey</div>
            
            <!-- Health Snapshot -->
            <div class="card">
                <h2>üí™ Health Snapshot</h2>
                <div class="dashboard-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-value" id="today-calories">--</div>
                        <div class="stat-label">Calories Today</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üíß</div>
                        <div class="stat-value" id="today-water">--</div>
                        <div class="stat-label">Water (glasses)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚öñÔ∏è</div>
                        <div class="stat-value" id="today-weight">--</div>
                        <div class="stat-label">Current Weight</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üèÉ</div>
                        <div class="stat-value" id="today-activity">--</div>
                        <div class="stat-label">Activity (min)</div>
                    </div>
                </div>
            </div>
            
            <!-- Habit Checklist -->
            <div class="card">
                <h2>‚úÖ Today's Habits</h2>
                <div class="habit-grid" id="today-habits">
                    <div class="habit-item" id="habit-multivitamin">
                        <div class="habit-icon">üíä</div>
                        <div class="habit-name">Multivitamin</div>
                        <div class="habit-status">--</div>
                    </div>
                    <div class="habit-item" id="habit-fruit">
                        <div class="habit-icon">üçé</div>
                        <div class="habit-name">Fruit</div>
                        <div class="habit-status">--</div>
                    </div>
                    <div class="habit-item" id="habit-water">
                        <div class="habit-icon">üíß</div>
                        <div class="habit-name">Water</div>
                        <div class="habit-status">--</div>
                    </div>
                    <div class="habit-item" id="habit-exercise">
                        <div class="habit-icon">üèÉ</div>
                        <div class="habit-name">Exercise</div>
                        <div class="habit-status">--</div>
                    </div>
                    <div class="habit-item" id="habit-creatine">
                        <div class="habit-icon">üí™</div>
                        <div class="habit-name">Creatine</div>
                        <div class="habit-status">--</div>
                    </div>
                </div>
            </div>
            
            <!-- Priority Tasks -->
            <div class="card">
                <h2>üìã Priority Tasks</h2>
                <div class="task-list" id="priority-tasks">
                    <div style="text-align: center; padding: 20px; color: #666;">Loading tasks...</div>
                </div>
            </div>
            
            <!-- Quick Wins -->
            <div class="dashboard-grid">
                <div class="quick-win-card">
                    <h3>‚úÖ Habits Complete</h3>
                    <div class="quick-win-value" id="habits-score">--</div>
                    <div class="quick-win-label">out of 5 today</div>
                </div>
                <div class="quick-win-card">
                    <h3>üìä Weekly Average</h3>
                    <div class="quick-win-value" id="weekly-score">--</div>
                    <div class="quick-win-label">habits per day</div>
                </div>
            </div>
        </div>
        
        <!-- TREND VIEW -->
        <div id="trend-view" class="hidden">
            <!-- Weight Trend -->
            <div class="trend-card">
                <h3>‚öñÔ∏è Weight Trend (Last 30 Days)</h3>
                <div class="chart-container">
                    <canvas id="weight-chart"></canvas>
                </div>
            </div>
            
            <div class="chart-row">
                <!-- Hydration Score -->
                <div class="trend-card">
                    <h3>üíß Hydration (7 Days)</h3>
                    <div class="chart-container">
                        <canvas id="hydration-chart"></canvas>
                    </div>
                </div>
                
                <!-- Habit Consistency -->
                <div class="trend-card">
                    <h3>‚úÖ Habit Consistency (7 Days)</h3>
                    <div class="chart-container">
                        <canvas id="habit-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="chart-row">
                <!-- Activity Timeline -->
                <div class="trend-card">
                    <h3>üèãÔ∏è Activity & Strain (7 Days)</h3>
                    <div class="chart-container">
                        <canvas id="activity-chart"></canvas>
                    </div>
                </div>
                
                <!-- Nutrition Trends -->
                <div class="trend-card">
                    <h3>üçΩÔ∏è Nutrition Trends (7 Days)</h3>
                    <div class="chart-container">
                        <canvas id="nutrition-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Productivity Velocity -->
            <div class="trend-card">
                <h3>üìà Productivity Velocity (30 Days)</h3>
                <div class="chart-container">
                    <canvas id="productivity-chart"></canvas>
                </div>
            </div>
        </div>
    </div>
    
    <div class="footer">
        ü¶û
    </div>
    
    <script>
        // View switching
        function switchView(view) {
            document.querySelectorAll('.view-toggle button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (view === 'today') {
                document.getElementById('today-view').classList.remove('hidden');
                document.getElementById('trend-view').classList.add('hidden');
            } else {
                document.getElementById('today-view').classList.add('hidden');
                document.getElementById('trend-view').classList.remove('hidden');
                loadTrendCharts();
            }
        }
        
        // Load today's data
        async function loadTodayData() {
            try {
                // Set date
                const today = new Date();
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                document.getElementById('today-date').textContent = today.toLocaleDateString('en-US', options);
                
                // Calculate day of journey (from Feb 1, 2026)
                const startDate = new Date('2026-02-01');
                const dayDiff = Math.floor((today - startDate) / (1000 * 60 * 60 * 24)) + 1;
                document.getElementById('day-counter').textContent = `Day ${dayDiff} of your journey`;
                
                // Load overview data
                const response = await fetch('data/overview_data.json');
                const data = await response.json();
                
                // Health data
                const health = data.today.health;
                const habits = data.today.habits;
                document.getElementById('today-calories').textContent = health.today_calories || '--';
                document.getElementById('today-water').textContent = habits.water || '--';
                document.getElementById('today-weight').textContent = health.current_weight ? health.current_weight + 'kg' : '--';
                document.getElementById('today-activity').textContent = health.today_activity ? Math.round(health.today_activity) : '--';
                
                // Habits
                updateHabitDisplay('habit-multivitamin', habits.multivitamin, 'Taken');
                updateHabitDisplay('habit-fruit', habits.fruit, 'Eaten');
                updateHabitDisplay('habit-water', habits.water >= 8, `${habits.water}/8`);
                updateHabitDisplay('habit-exercise', habits.exercise, 'Done');
                updateHabitDisplay('habit-creatine', habits.creatine, 'Taken');
                
                // Calculate score
                let score = 0;
                if (habits.multivitamin) score++;
                if (habits.fruit) score++;
                if (habits.water >= 8) score++;
                if (habits.exercise) score++;
                if (habits.creatine) score++;
                document.getElementById('habits-score').textContent = score;
                
                // Weekly average
                const habitDays = data.trends.habit_days;
                let totalScore = 0;
                habitDays.forEach(day => {
                    if (day.multivitamin) totalScore++;
                    if (day.fruit) totalScore++;
                    if (day.water >= 8) totalScore++;
                    if (day.exercise) totalScore++;
                    if (day.creatine) totalScore++;
                });
                document.getElementById('weekly-score').textContent = (totalScore / habitDays.length).toFixed(1);
                
                // Priority tasks
                const priorityTasks = data.today.priority_tasks;
                const tasksContainer = document.getElementById('priority-tasks');
                if (priorityTasks.length > 0) {
                    tasksContainer.innerHTML = priorityTasks.map(task => `
                        <div class="task-item ${task.due_status}">
                            <div class="task-content">
                                <div class="task-name">${task.name}</div>
                                <div class="task-meta">${task.due_status === 'overdue' ? 'üî¥ Overdue' : 'üü° Due Today'} ‚Ä¢ ${task.category}</div>
                            </div>
                        </div>
                    `).join('');
                } else {
                    tasksContainer.innerHTML = '<div style="text-align: center; padding: 20px; color: #28a745;">üéâ No urgent tasks!</div>';
                }
                
            } catch (error) {
                console.error('Error loading today data:', error);
            }
        }
        
        function updateHabitDisplay(elementId, completed, label) {
            const element = document.getElementById(elementId);
            const statusEl = element.querySelector('.habit-status');
            
            if (completed) {
                element.classList.add('complete');
                element.classList.remove('incomplete');
                statusEl.textContent = '‚úÖ ' + label;
                statusEl.style.color = '#28a745';
            } else {
                element.classList.add('incomplete');
                element.classList.remove('complete');
                statusEl.textContent = '‚¨ú ' + label;
                statusEl.style.color = '#666';
            }
        }
        
        // Load trend charts with live data
        let chartsLoaded = false;
        async function loadTrendCharts() {
            if (chartsLoaded) return;
            chartsLoaded = true;
            
            try {
                // Load overview data for trends
                const response = await fetch('data/overview_data.json');
                const data = await response.json();
                
                // Weight chart
                const weightHistory = data.trends.weight_history.slice().reverse();
                const weightLabels = weightHistory.map(w => w.date.slice(5)); // MM-DD
                const weightData = weightHistory.map(w => w.weight);
                
                const weightCtx = document.getElementById('weight-chart').getContext('2d');
                new Chart(weightCtx, {
                    type: 'line',
                    data: {
                        labels: weightLabels,
                        datasets: [{
                            label: 'Weight (kg)',
                            data: weightData,
                            borderColor: '#9945FF',
                            backgroundColor: 'rgba(153, 69, 255, 0.1)',
                            tension: 0.4,
                            fill: true
                        }, {
                            label: 'Goal (85kg)',
                            data: weightHistory.map(() => 85),
                            borderColor: '#28a745',
                            borderDash: [5, 5],
                            pointRadius: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: true } }
                    }
                });
                
                // Hydration chart
                const habitDays = data.trends.habit_days.slice().reverse();
                const hydrationLabels = habitDays.map(h => h.date.slice(5));
                const hydrationData = habitDays.map(h => h.water);
                
                const hydrationCtx = document.getElementById('hydration-chart').getContext('2d');
                new Chart(hydrationCtx, {
                    type: 'bar',
                    data: {
                        labels: hydrationLabels,
                        datasets: [{
                            label: 'Glasses',
                            data: hydrationData,
                            backgroundColor: '#339AF0',
                            borderRadius: 8
                        }, {
                            label: 'Goal',
                            data: habitDays.map(() => 8),
                            type: 'line',
                            borderColor: '#dc3545',
                            borderDash: [5, 5],
                            pointRadius: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: { y: { max: 10 } }
                    }
                });
                
                // Habit consistency chart
                const habitScoreData = habitDays.map(day => {
                    let score = 0;
                    if (day.multivitamin) score++;
                    if (day.fruit) score++;
                    if (day.water >= 8) score++;
                    if (day.exercise) score++;
                    if (day.creatine) score++;
                    return score;
                });
                
                const habitCtx = document.getElementById('habit-chart').getContext('2d');
                new Chart(habitCtx, {
                    type: 'bar',
                    data: {
                        labels: hydrationLabels,
                        datasets: [{
                            label: 'Habits Complete',
                            data: habitScoreData,
                            backgroundColor: '#51CF66',
                            borderRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: { y: { max: 5 } }
                    }
                });
                
                // Activity chart
                const workouts = data.trends.workouts;
                const workoutLabels = workouts.map(w => w.date.slice(5));
                const strainData = workouts.map(w => w.strain);
                const durationData = workouts.map(w => w.duration);
                
                const activityCtx = document.getElementById('activity-chart').getContext('2d');
                new Chart(activityCtx, {
                    type: 'line',
                    data: {
                        labels: workoutLabels,
                        datasets: [{
                            label: 'Strain',
                            data: strainData,
                            borderColor: '#FF6B9D',
                            backgroundColor: 'rgba(255, 107, 157, 0.1)',
                            tension: 0.4,
                            fill: true
                        }, {
                            label: 'Duration (min)',
                            data: durationData,
                            borderColor: '#9945FF',
                            yAxisID: 'y1'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y1: {
                                type: 'linear',
                                display: true,
                                position: 'right'
                            }
                        }
                    }
                });
                
                // Load trend data for nutrition and productivity
                const trendResponse = await fetch('data/trend_data.json');
                const trendData = await trendResponse.json();
                
                // Nutrition chart
                const nutritionData = trendData.nutrition;
                const nutritionCtx = document.getElementById('nutrition-chart').getContext('2d');
                new Chart(nutritionCtx, {
                    type: 'line',
                    data: {
                        labels: nutritionData.map(n => n.date.slice(5)),
                        datasets: [{
                            label: 'Calories',
                            data: nutritionData.map(n => n.calories),
                            borderColor: '#9945FF',
                            backgroundColor: 'rgba(153, 69, 255, 0.1)',
                            tension: 0.4,
                            fill: true
                        }, {
                            label: 'Protein (g)',
                            data: nutritionData.map(n => n.protein),
                            borderColor: '#51CF66',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
                
                // Productivity chart
                const productivityData = trendData.productivity;
                const productivityCtx = document.getElementById('productivity-chart').getContext('2d');
                new Chart(productivityCtx, {
                    type: 'line',
                    data: {
                        labels: productivityData.map((p, i) => i % 5 === 0 ? p.date.slice(5) : ''),
                        datasets: [{
                            label: 'Tasks Completed',
                            data: productivityData.map(p => p.completed),
                            borderColor: '#9945FF',
                            backgroundColor: 'rgba(153, 69, 255, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
                
            } catch (error) {
                console.error('Error loading trend charts:', error);
            }
        }
        
        // Load data on page load
        document.addEventListener('DOMContentLoaded', loadTodayData);
    </script>
</body>
</html>
